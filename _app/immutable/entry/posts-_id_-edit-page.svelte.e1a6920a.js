import{S as We,i as Ye,s as Ze,k as n,q as T,a as y,l as u,m as g,r as N,h as p,c as w,n as l,b as ye,C as o,Q as P,D as H,u as O,R as et,E as le,F as at,G as Te,o as lt,y as Ne,P as ot,z as Ve,A as Be,g as oe,d as se,B as Re,e as Je,v as st,f as it}from"../chunks/index.a2a1b63d.js";import"../chunks/store.09a7d2bf.js";import{a as nt,b as ut,c as ct,u as pt,g as dt}from"../chunks/firebase.11792937.js";import{b as tt,u as Ke}from"../chunks/post.e841b5b9.js";import{p as rt}from"../chunks/stores.b63bceff.js";import{X as ft,m as mt,r as gt,x as ht}from"../chunks/ru.3db335e3.js";import{R as bt,a as _t}from"../chunks/Route.5b9cd842.js";import"../chunks/history.686f2e10.js";import{b as vt}from"../chunks/paths.bd4024aa.js";function yt(s){let a,t,r,i,e,c=s[1]("Title")+"",h,f,m,L,V,k,A,G=s[1]("Description")+"",b,_,E,we,J,Y=s[1]("Make it as simple as informative")+"",ie,Ee,B,R,C,Z=s[1]("Author Name")+"",ne,ke,$,$e,q,z,ee=s[1]("Author Email")+"",ue,Ie,I,xe,F,S,Q,te=s[1]("Price")+"",ce,De,x,Pe,M,X,re=s[1]("Files")+"",pe,Le,K,U,Ae,j,ae=s[1]("Submit")+"",de,Ue,qe;return{c(){a=n("div"),t=n("form"),r=n("div"),i=n("div"),e=n("label"),h=T(c),f=y(),m=n("input"),L=y(),V=n("div"),k=n("div"),A=n("label"),b=T(G),_=y(),E=n("input"),we=y(),J=n("p"),ie=T(Y),Ee=y(),B=n("div"),R=n("div"),C=n("label"),ne=T(Z),ke=y(),$=n("input"),$e=y(),q=n("div"),z=n("label"),ue=T(ee),Ie=y(),I=n("input"),xe=y(),F=n("div"),S=n("div"),Q=n("label"),ce=T(te),De=y(),x=n("input"),Pe=y(),M=n("div"),X=n("label"),pe=T(re),Le=y(),K=n("div"),U=n("input"),Ae=y(),j=n("button"),de=T(ae),this.h()},l(d){a=u(d,"DIV",{class:!0});var v=g(a);t=u(v,"FORM",{class:!0});var D=g(t);r=u(D,"DIV",{class:!0});var Fe=g(r);i=u(Fe,"DIV",{class:!0});var fe=g(i);e=u(fe,"LABEL",{class:!0,for:!0});var Se=g(e);h=N(Se,c),Se.forEach(p),f=w(fe),m=u(fe,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),fe.forEach(p),Fe.forEach(p),L=w(D),V=u(D,"DIV",{class:!0});var Me=g(V);k=u(Me,"DIV",{class:!0});var W=g(k);A=u(W,"LABEL",{class:!0,for:!0});var Oe=g(A);b=N(Oe,G),Oe.forEach(p),_=w(W),E=u(W,"INPUT",{class:!0,id:!0,placeholder:!0}),we=w(W),J=u(W,"P",{class:!0});var Ge=g(J);ie=N(Ge,Y),Ge.forEach(p),W.forEach(p),Me.forEach(p),Ee=w(D),B=u(D,"DIV",{class:!0});var me=g(B);R=u(me,"DIV",{class:!0});var ge=g(R);C=u(ge,"LABEL",{class:!0,for:!0});var Ce=g(C);ne=N(Ce,Z),Ce.forEach(p),ke=w(ge),$=u(ge,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),ge.forEach(p),$e=w(me),q=u(me,"DIV",{class:!0});var he=g(q);z=u(he,"LABEL",{class:!0,for:!0});var ze=g(z);ue=N(ze,ee),ze.forEach(p),Ie=w(he),I=u(he,"INPUT",{class:!0,itype:!0,id:!0,placeholder:!0}),he.forEach(p),me.forEach(p),xe=w(D),F=u(D,"DIV",{class:!0});var be=g(F);S=u(be,"DIV",{class:!0});var _e=g(S);Q=u(_e,"LABEL",{class:!0,for:!0});var Qe=g(Q);ce=N(Qe,te),Qe.forEach(p),De=w(_e),x=u(_e,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),_e.forEach(p),Pe=w(be),M=u(be,"DIV",{class:!0});var ve=g(M);X=u(ve,"LABEL",{class:!0,for:!0});var Xe=g(X);pe=N(Xe,re),Xe.forEach(p),Le=w(ve),K=u(ve,"DIV",{class:!0});var je=g(K);U=u(je,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),je.forEach(p),ve.forEach(p),be.forEach(p),Ae=w(D),j=u(D,"BUTTON",{type:!0});var He=g(j);de=N(He,ae),He.forEach(p),D.forEach(p),v.forEach(p),this.h()},h(){l(e,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),l(e,"for","title"),l(m,"class","appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"),l(m,"type","text"),l(m,"id","title"),m.required=!0,l(m,"placeholder","Title"),l(i,"class","w-full px-3"),l(r,"class","flex flex-wrap -mx-3 mb-6"),l(A,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),l(A,"for","description"),l(E,"class","appearance-none block w-full bg-gray-200 text-gray-700 place-items-start border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"),l(E,"id","description"),l(E,"placeholder","Description"),l(J,"class","text-gray-600 text-xs italic"),l(k,"class","w-full px-3 h-full"),l(V,"class","flex flex-wrap -mx-3 mb-6"),l(C,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),l(C,"for","author"),l($,"class","appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"),l($,"type","text"),l($,"id","author"),l($,"placeholder","Author"),$.required=!0,l(R,"class","w-full md:w-1/2 px-3 mb-6 md:mb-0"),l(z,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),l(z,"for","authorEmail"),l(I,"class","appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"),l(I,"itype","email"),l(I,"id","authorEmail"),l(I,"placeholder","email@web.net"),I.required=!0,l(q,"class","w-full md:w-1/2 px-3"),l(B,"class","flex flex-wrap -mx-3 mb-6"),l(Q,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),l(Q,"for","price"),l(x,"class","appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-2.5 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"),l(x,"type","number"),l(x,"id","price"),x.required=!0,l(x,"placeholder","400$"),l(S,"class","md:w-2/4 h-1/2 py-0 mb-6 md:mb-0"),l(X,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),l(X,"for","files"),l(U,"class","appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-2 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"),l(U,"type","file"),l(U,"id","images"),U.multiple=!0,l(U,"placeholder","Files"),l(K,"class","relative"),l(M,"class","md:w-2/4 h-1/2 px-3 mb-6 md:mb-0"),l(F,"class","flex flex-wrap -mx-3 mb-2 ms-0"),l(j,"type","submit"),l(t,"class","w-full max-w-lg "),l(a,"class","flex pt-60 place-content-center place")},m(d,v){ye(d,a,v),o(a,t),o(t,r),o(r,i),o(i,e),o(e,h),o(i,f),o(i,m),P(m,s[0].title),o(t,L),o(t,V),o(V,k),o(k,A),o(A,b),o(k,_),o(k,E),P(E,s[0].description),o(k,we),o(k,J),o(J,ie),o(t,Ee),o(t,B),o(B,R),o(R,C),o(C,ne),o(R,ke),o(R,$),P($,s[0].author),o(B,$e),o(B,q),o(q,z),o(z,ue),o(q,Ie),o(q,I),P(I,s[0].authorEmail),o(t,xe),o(t,F),o(F,S),o(S,Q),o(Q,ce),o(S,De),o(S,x),P(x,s[0].price),o(F,Pe),o(F,M),o(M,X),o(X,pe),o(M,Le),o(M,K),o(K,U),o(t,Ae),o(t,j),o(j,de),Ue||(qe=[H(m,"input",s[4]),H(E,"input",s[5]),H($,"input",s[6]),H(I,"input",s[7]),H(x,"input",s[8]),H(U,"change",s[3]),H(j,"click",s[2])],Ue=!0)},p(d,[v]){v&2&&c!==(c=d[1]("Title")+"")&&O(h,c),v&1&&m.value!==d[0].title&&P(m,d[0].title),v&2&&G!==(G=d[1]("Description")+"")&&O(b,G),v&1&&E.value!==d[0].description&&P(E,d[0].description),v&2&&Y!==(Y=d[1]("Make it as simple as informative")+"")&&O(ie,Y),v&2&&Z!==(Z=d[1]("Author Name")+"")&&O(ne,Z),v&1&&$.value!==d[0].author&&P($,d[0].author),v&2&&ee!==(ee=d[1]("Author Email")+"")&&O(ue,ee),v&1&&I.value!==d[0].authorEmail&&P(I,d[0].authorEmail),v&2&&te!==(te=d[1]("Price")+"")&&O(ce,te),v&1&&et(x.value)!==d[0].price&&P(x,d[0].price),v&2&&re!==(re=d[1]("Files")+"")&&O(pe,re),v&2&&ae!==(ae=d[1]("Submit")+"")&&O(de,ae)},i:le,o:le,d(d){d&&p(a),Ue=!1,at(qe)}}}function wt(s,a,t){let r,i;Te(s,rt,b=>t(10,r=b)),Te(s,ft,b=>t(1,i=b)),mt("ru",gt),ht.set("ru");let e={},c=!1;try{const{id:b}=r.params;console.log(b),lt(async()=>{t(0,e=await tt(b)),console.log(e)})}catch(b){console.log("error while getting id of a post",b)}async function h(b){b.preventDefault(),nt.currentUser;try{if(c){const _=await Promise.all(e.images.map(f));console.log("These are imageUrls",_),t(0,e.images=_,e),Ke(e.id,e.title,e.images,e.author,e.authorEmail,e.description,e.price,e.date)}else console.log("don't touch images"),Ke(e.id,e.title,e.images,e.author,e.authorEmail,e.description,e.price,e.date);console.log("Form submitted")}catch(_){console.log("auth error",_)}}async function f(b){try{const _=ut(ct,`images/${b.name}`);await pt(_,b);const E=await dt(_);return console.log("Image uploaded:",E),E}catch(_){console.log("uploadImage error",_)}}function m(b){try{c=!0;const _=b.target.files;console.log(_),t(0,e.images=Array.from(_),e)}catch(_){console.log("handleImageUpload error",_)}}function L(){e.title=this.value,t(0,e)}function V(){e.description=this.value,t(0,e)}function k(){e.author=this.value,t(0,e)}function A(){e.authorEmail=this.value,t(0,e)}function G(){e.price=et(this.value),t(0,e)}return[e,i,h,m,L,V,k,A,G]}class Et extends We{constructor(a){super(),Ye(this,a,wt,yt,Ze,{})}}function kt(s){let a,t;return a=new Et({props:{post:s[0]}}),{c(){Ne(a.$$.fragment)},l(r){Ve(a.$$.fragment,r)},m(r,i){Be(a,r,i),t=!0},p(r,i){const e={};i&1&&(e.post=r[0]),a.$set(e)},i(r){t||(oe(a.$$.fragment,r),t=!0)},o(r){se(a.$$.fragment,r),t=!1},d(r){Re(a,r)}}}function $t(s){let a;return{c(){a=T("LOADING")},l(t){a=N(t,"LOADING")},m(t,r){ye(t,a,r)},p:le,i:le,o:le,d(t){t&&p(a)}}}function It(s){let a,t,r,i;const e=[$t,kt],c=[];function h(f,m){return f[1]?0:1}return a=h(s),t=c[a]=e[a](s),{c(){t.c(),r=Je()},l(f){t.l(f),r=Je()},m(f,m){c[a].m(f,m),ye(f,r,m),i=!0},p(f,m){let L=a;a=h(f),a===L?c[a].p(f,m):(st(),se(c[L],1,1,()=>{c[L]=null}),it(),t=c[a],t?t.p(f,m):(t=c[a]=e[a](f),t.c()),oe(t,1),t.m(r.parentNode,r))},i(f){i||(oe(t),i=!0)},o(f){se(t),i=!1},d(f){c[a].d(f),f&&p(r)}}}function xt(s){let a,t;return a=new _t({props:{path:`${vt}/posts/:id/edit/`,$$slots:{default:[It,({params:r})=>({4:r}),({params:r})=>r?16:0]},$$scope:{ctx:s}}}),{c(){Ne(a.$$.fragment)},l(r){Ve(a.$$.fragment,r)},m(r,i){Be(a,r,i),t=!0},p(r,i){const e={};i&35&&(e.$$scope={dirty:i,ctx:r}),a.$set(e)},i(r){t||(oe(a.$$.fragment,r),t=!0)},o(r){se(a.$$.fragment,r),t=!1},d(r){Re(a,r)}}}function Dt(s){let a,t,r,i;return document.title="Edit page of the post",r=new bt({props:{$$slots:{default:[xt]},$$scope:{ctx:s}}}),{c(){a=n("meta"),t=y(),Ne(r.$$.fragment),this.h()},l(e){const c=ot("svelte-ql95em",document.head);a=u(c,"META",{name:!0,content:!0}),c.forEach(p),t=w(e),Ve(r.$$.fragment,e),this.h()},h(){l(a,"name","edit of a single blog page"),l(a,"content","Edit form for the blog post")},m(e,c){o(document.head,a),ye(e,t,c),Be(r,e,c),i=!0},p(e,[c]){const h={};c&35&&(h.$$scope={dirty:c,ctx:e}),r.$set(h)},i(e){i||(oe(r.$$.fragment,e),i=!0)},o(e){se(r.$$.fragment,e),i=!1},d(e){p(a),e&&p(t),Re(r,e)}}}function Pt(s,a,t){let r;Te(s,rt,h=>t(2,r=h));let i={},e=!0;return(async()=>{try{const h=r.params.id;console.log(h),h?(t(0,i=await tt(h)),t(1,e=!1),console.log("loading state:",e),console.log("this is fucking post prop",i)):console.log("id is not exists on page.params!")}catch(h){console.log("error while loadPost",h)}})(),[i,e]}class Ft extends We{constructor(a){super(),Ye(this,a,Pt,Dt,Ze,{})}}export{Ft as default};
