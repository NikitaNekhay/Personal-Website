import{S as mt,i as gt,s as bt,k as n,q as R,a as v,l as i,m as p,r as O,h as u,c as _,n as r,b as Le,C as s,Q as T,D as j,u as C,E as de,F as xt,G as ze,o as Et,y as He,P as yt,z as Qe,A as Xe,g as fe,d as he,B as Je,e as ft,v as Pt,f as It}from"../chunks/index.4d33c6d3.js";import{X as $t,m as At,e as kt,x as Dt}from"../chunks/en.4acc708b.js";import{a as Nt,b as Lt,c as Tt,u as St,g as Ut}from"../chunks/firebase.86d06953.js";import{b as wt,u as ht}from"../chunks/post.dcb92099.js";import{p as vt}from"../chunks/stores.8b6f88e8.js";import{R as Vt,a as Bt}from"../chunks/Route.7f67ceac.js";import"../chunks/history.686f2e10.js";import{b as qt}from"../chunks/paths.f91ddd47.js";function Rt(l){let a,t,o,c,e=l[1]("EDIT POST")+"",d,g,f,x,E,y,se,F,z=l[1]("Title")+"",H,b,m,k,S,D,Te,Q,oe=l[1]("Description")+"",me,Se,X,ae=l[1]("Make it as simple as informative")+"",ge,Ue,M,J,U,P,Ve,K,le=l[1]("Author Name")+"",be,Be,W,V,I,qe,Y,ne=l[1]("Author Email")+"",we,Re,G,Z,B,$,Oe,ee,ie=l[1]("Price")+"",ve,Fe,te,q,N,Me,ue,Ge,L,ce,je,re,pe=l[1]("Submit")+"",_e,Ce,Ke;return{c(){a=n("div"),t=n("form"),o=n("div"),c=n("h1"),d=R(e),g=v(),f=n("div"),x=n("div"),E=n("label"),y=n("input"),se=v(),F=n("span"),H=R(z),b=v(),m=n("div"),k=n("div"),S=n("label"),D=n("input"),Te=v(),Q=n("span"),me=R(oe),Se=v(),X=n("p"),ge=R(ae),Ue=v(),M=n("div"),J=n("div"),U=n("label"),P=n("input"),Ve=v(),K=n("span"),be=R(le),Be=v(),W=n("div"),V=n("label"),I=n("input"),qe=v(),Y=n("span"),we=R(ne),Re=v(),G=n("div"),Z=n("div"),B=n("label"),$=n("input"),Oe=v(),ee=n("span"),ve=R(ie),Fe=v(),te=n("div"),q=n("label"),N=n("input"),Me=v(),ue=n("span"),Ge=v(),L=n("button"),ce=n("span"),je=v(),re=n("span"),_e=R(pe),this.h()},l(h){a=i(h,"DIV",{class:!0});var w=p(a);t=i(w,"FORM",{class:!0});var A=p(t);o=i(A,"DIV",{class:!0});var We=p(o);c=i(We,"H1",{class:!0});var Ye=p(c);d=O(Ye,e),Ye.forEach(u),We.forEach(u),g=_(A),f=i(A,"DIV",{class:!0});var Ze=p(f);x=i(Ze,"DIV",{class:!0});var et=p(x);E=i(et,"LABEL",{class:!0,for:!0});var xe=p(E);y=i(xe,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),se=_(xe),F=i(xe,"SPAN",{class:!0});var tt=p(F);H=O(tt,z),tt.forEach(u),xe.forEach(u),et.forEach(u),Ze.forEach(u),b=_(A),m=i(A,"DIV",{class:!0});var rt=p(m);k=i(rt,"DIV",{class:!0});var Ee=p(k);S=i(Ee,"LABEL",{class:!0,for:!0});var ye=p(S);D=i(ye,"INPUT",{class:!0,id:!0,placeholder:!0}),Te=_(ye),Q=i(ye,"SPAN",{class:!0});var st=p(Q);me=O(st,oe),st.forEach(u),ye.forEach(u),Se=_(Ee),X=i(Ee,"P",{class:!0});var ot=p(X);ge=O(ot,ae),ot.forEach(u),Ee.forEach(u),rt.forEach(u),Ue=_(A),M=i(A,"DIV",{class:!0});var Pe=p(M);J=i(Pe,"DIV",{class:!0});var at=p(J);U=i(at,"LABEL",{class:!0,for:!0});var Ie=p(U);P=i(Ie,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),Ve=_(Ie),K=i(Ie,"SPAN",{class:!0});var lt=p(K);be=O(lt,le),lt.forEach(u),Ie.forEach(u),at.forEach(u),Be=_(Pe),W=i(Pe,"DIV",{class:!0});var nt=p(W);V=i(nt,"LABEL",{class:!0,for:!0});var $e=p(V);I=i($e,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),qe=_($e),Y=i($e,"SPAN",{class:!0});var it=p(Y);we=O(it,ne),it.forEach(u),$e.forEach(u),nt.forEach(u),Pe.forEach(u),Re=_(A),G=i(A,"DIV",{class:!0});var Ae=p(G);Z=i(Ae,"DIV",{class:!0});var ut=p(Z);B=i(ut,"LABEL",{class:!0,for:!0});var ke=p(B);$=i(ke,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),Oe=_(ke),ee=i(ke,"SPAN",{class:!0});var ct=p(ee);ve=O(ct,ie),ct.forEach(u),ke.forEach(u),ut.forEach(u),Fe=_(Ae),te=i(Ae,"DIV",{class:!0});var pt=p(te);q=i(pt,"LABEL",{class:!0,for:!0});var De=p(q);N=i(De,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),Me=_(De),ue=i(De,"SPAN",{class:!0});var _t=p(ue);_t.forEach(u),De.forEach(u),pt.forEach(u),Ae.forEach(u),Ge=_(A),L=i(A,"BUTTON",{class:!0,type:!0});var Ne=p(L);ce=i(Ne,"SPAN",{class:!0}),p(ce).forEach(u),je=_(Ne),re=i(Ne,"SPAN",{class:!0});var dt=p(re);_e=O(dt,pe),dt.forEach(u),Ne.forEach(u),A.forEach(u),w.forEach(u),this.h()},h(){r(c,"class","text-blue-0 text-4xl font-abril"),r(o,"class","flex justify-center mb-6"),r(y,"class","peer bg-white-1 h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm"),r(y,"type","text"),r(y,"id","title"),y.required=!0,r(y,"placeholder","Title"),r(F,"class","cursor-text absolute start-3 top-3 -translate-y-1/2 text-xs text-gray-700 bg-white-1 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-sm peer-focus:top-3 peer-focus:text-xs"),r(E,"class","block relative overflow-hidden bg-white-1 rounded-md border border-gray-200 px-3 pt-3 shadow-sm focus-within:border-white-2 focus-within:ring-1 focus-within:ring-white-2"),r(E,"for","title"),r(x,"class","w-full px-3"),r(f,"class","flex flex-wrap -mx-3 mb-6"),r(D,"class","peer bg-white-1 h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm"),r(D,"id","description"),r(D,"placeholder","Description"),r(Q,"class","cursor-text absolute start-3 top-3 -translate-y-1/2 text-xs text-gray-700 bg-white-1 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-sm peer-focus:top-3 peer-focus:text-xs"),r(S,"class","block relative overflow-hidden bg-white-1 rounded-md border border-gray-200 px-3 pt-3 shadow-sm focus-within:border-white-2 focus-within:ring-1 focus-within:ring-white-2"),r(S,"for","description"),r(X,"class","text-gray-600 text-xs italic mt-3"),r(k,"class","w-full px-3 h-full"),r(m,"class","flex flex-wrap -mx-3 mb-4"),r(P,"class","peer bg-white-1 h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm"),r(P,"type","text"),r(P,"id","author"),r(P,"placeholder","Author"),P.required=!0,r(K,"class","cursor-text absolute start-3 top-3 -translate-y-1/2 text-xs text-gray-700 bg-white-1 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-sm peer-focus:top-3 peer-focus:text-xs"),r(U,"class","block relative overflow-hidden bg-white-1 rounded-md border border-gray-200 px-3 pt-3 shadow-sm focus-within:border-white-2 focus-within:ring-1 focus-within:ring-white-2"),r(U,"for","author"),r(J,"class","w-full md:w-1/2 px-3 mb-6 md:mb-0"),r(I,"class","peer bg-white-1 h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm"),r(I,"type","email"),r(I,"id","authorEmail"),r(I,"placeholder","email@web.net"),I.required=!0,r(Y,"class","cursor-text absolute start-3 top-3 -translate-y-1/2 text-xs text-gray-700 bg-white-1 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-sm peer-focus:top-3 peer-focus:text-xs"),r(V,"class","block relative overflow-hidden bg-white-1 rounded-md border border-gray-200 px-3 pt-3 shadow-sm focus-within:border-white-2 focus-within:ring-1 focus-within:ring-white-2"),r(V,"for","authorEmail"),r(W,"class","w-full md:w-1/2 px-3"),r(M,"class","flex flex-wrap -mx-3 mb-6"),r($,"class","peer bg-white-1 h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm"),r($,"type","text"),r($,"id","price"),r($,"placeholder","400$"),$.required=!0,r(ee,"class","cursor-text absolute start-3 top-3 -translate-y-1/2 text-xs text-gray-700 bg-white-1 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-sm peer-focus:top-3 peer-focus:text-xs"),r(B,"class","block relative overflow-hidden bg-white-1 rounded-md border border-gray-200 px-3 pt-3 shadow-sm focus-within:border-white-2 focus-within:ring-1 focus-within:ring-white-2"),r(B,"for","price"),r(Z,"class","w-2/5 mb-6"),r(N,"class","transparent peer bg-white-1 h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm text-center block"),r(N,"type","file"),r(N,"id","images"),N.multiple=!0,r(N,"placeholder","Files"),r(ue,"class","cursor-text absolute start-3 top-3 -translate-y-1/2 text-xs text-gray-700 bg-white-1 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-sm peer-focus:top-3 peer-focus:text-xs"),r(q,"class","block relative overflow-hidden bg-white-1 rounded-md border border-gray-200 px-3 pt-3 shadow-sm focus-within:border-white-2 focus-within:ring-1 focus-within:ring-white-2"),r(q,"for","files"),r(te,"class","md:w-3/5 h-1/2 px-3 mb-3 md:mb-3"),r(G,"class","flex flex-wrap -mx-3 mb-2 ms-0"),r(ce,"class","absolute inset-x-0 bottom-0 h-[2px] bg-orange-0 transition-all group-hover:h-full group-active:bg-orange-0"),r(re,"class","relative text-sm font-medium text-orange-0 transition-colors group-hover:text-white"),r(L,"class","flex items-center mx-[136px] w-1/2 rounded-md justify-center group relative overflow-hidden border border-orange-0 px-8 py-3 focus:outline-none focus:ring"),r(L,"type","button"),r(t,"class","w-full max-w-lg "),r(a,"class","flex pt-60 place-content-center place")},m(h,w){Le(h,a,w),s(a,t),s(t,o),s(o,c),s(c,d),s(t,g),s(t,f),s(f,x),s(x,E),s(E,y),T(y,l[0].title),s(E,se),s(E,F),s(F,H),s(t,b),s(t,m),s(m,k),s(k,S),s(S,D),T(D,l[0].description),s(S,Te),s(S,Q),s(Q,me),s(k,Se),s(k,X),s(X,ge),s(t,Ue),s(t,M),s(M,J),s(J,U),s(U,P),T(P,l[0].author),s(U,Ve),s(U,K),s(K,be),s(M,Be),s(M,W),s(W,V),s(V,I),T(I,l[0].authorEmail),s(V,qe),s(V,Y),s(Y,we),s(t,Re),s(t,G),s(G,Z),s(Z,B),s(B,$),T($,l[0].price),s(B,Oe),s(B,ee),s(ee,ve),s(G,Fe),s(G,te),s(te,q),s(q,N),s(q,Me),s(q,ue),s(t,Ge),s(t,L),s(L,ce),s(L,je),s(L,re),s(re,_e),Ce||(Ke=[j(y,"input",l[4]),j(D,"input",l[5]),j(P,"input",l[6]),j(I,"input",l[7]),j($,"input",l[8]),j(N,"change",l[3]),j(N,"change",l[9]),j(L,"click",l[2])],Ce=!0)},p(h,[w]){w&2&&e!==(e=h[1]("EDIT POST")+"")&&C(d,e),w&1&&y.value!==h[0].title&&T(y,h[0].title),w&2&&z!==(z=h[1]("Title")+"")&&C(H,z),w&1&&D.value!==h[0].description&&T(D,h[0].description),w&2&&oe!==(oe=h[1]("Description")+"")&&C(me,oe),w&2&&ae!==(ae=h[1]("Make it as simple as informative")+"")&&C(ge,ae),w&1&&P.value!==h[0].author&&T(P,h[0].author),w&2&&le!==(le=h[1]("Author Name")+"")&&C(be,le),w&1&&I.value!==h[0].authorEmail&&T(I,h[0].authorEmail),w&2&&ne!==(ne=h[1]("Author Email")+"")&&C(we,ne),w&1&&$.value!==h[0].price&&T($,h[0].price),w&2&&ie!==(ie=h[1]("Price")+"")&&C(ve,ie),w&2&&pe!==(pe=h[1]("Submit")+"")&&C(_e,pe)},i:de,o:de,d(h){h&&u(a),Ce=!1,xt(Ke)}}}function Ot(l,a,t){let o,c;ze(l,vt,b=>t(11,o=b)),ze(l,$t,b=>t(1,c=b)),At("en",kt),Dt.set("en");let e={},d=!1;try{const{id:b}=o.params;console.log(b),Et(async()=>{t(0,e=await wt(b)),console.log(e)})}catch(b){console.log("error while getting id of a post",b)}async function g(b){b.preventDefault(),Nt.currentUser;try{if(d){const m=await Promise.all(e.images.map(f));console.log("These are imageUrls",m),t(0,e.images=m,e),ht(e.id,e.title,e.images,e.author,e.authorEmail,e.description,e.price,e.date)}else console.log("don't touch images"),ht(e.id,e.title,e.images,e.author,e.authorEmail,e.description,e.price,e.date);console.log("Form submitted")}catch(m){console.log("auth error",m)}}async function f(b){try{const m=Lt(Tt,`images/${b.name}`);await St(m,b);const k=await Ut(m);return console.log("Image uploaded:",k),k}catch(m){console.log("uploadImage error",m)}}function x(b){try{d=!0;const m=b.target.files;console.log(m),t(0,e.images=Array.from(m),e)}catch(m){console.log("handleImageUpload error",m)}}function E(){e.title=this.value,t(0,e)}function y(){e.description=this.value,t(0,e)}function se(){e.author=this.value,t(0,e)}function F(){e.authorEmail=this.value,t(0,e)}function z(){e.price=this.value,t(0,e)}function H(){e.images=this.value,t(0,e)}return[e,c,g,x,E,y,se,F,z,H]}class Ft extends mt{constructor(a){super(),gt(this,a,Ot,Rt,bt,{})}}function Mt(l){let a,t;return a=new Ft({props:{post:l[0]}}),{c(){He(a.$$.fragment)},l(o){Qe(a.$$.fragment,o)},m(o,c){Xe(a,o,c),t=!0},p(o,c){const e={};c&1&&(e.post=o[0]),a.$set(e)},i(o){t||(fe(a.$$.fragment,o),t=!0)},o(o){he(a.$$.fragment,o),t=!1},d(o){Je(a,o)}}}function Gt(l){let a;return{c(){a=R("LOADING")},l(t){a=O(t,"LOADING")},m(t,o){Le(t,a,o)},p:de,i:de,o:de,d(t){t&&u(a)}}}function jt(l){let a,t,o,c;const e=[Gt,Mt],d=[];function g(f,x){return f[1]?0:1}return a=g(l),t=d[a]=e[a](l),{c(){t.c(),o=ft()},l(f){t.l(f),o=ft()},m(f,x){d[a].m(f,x),Le(f,o,x),c=!0},p(f,x){let E=a;a=g(f),a===E?d[a].p(f,x):(Pt(),he(d[E],1,1,()=>{d[E]=null}),It(),t=d[a],t?t.p(f,x):(t=d[a]=e[a](f),t.c()),fe(t,1),t.m(o.parentNode,o))},i(f){c||(fe(t),c=!0)},o(f){he(t),c=!1},d(f){d[a].d(f),f&&u(o)}}}function Ct(l){let a,t;return a=new Bt({props:{path:`${qt}/posts/:id/edit/`,$$slots:{default:[jt,({params:o})=>({4:o}),({params:o})=>o?16:0]},$$scope:{ctx:l}}}),{c(){He(a.$$.fragment)},l(o){Qe(a.$$.fragment,o)},m(o,c){Xe(a,o,c),t=!0},p(o,c){const e={};c&35&&(e.$$scope={dirty:c,ctx:o}),a.$set(e)},i(o){t||(fe(a.$$.fragment,o),t=!0)},o(o){he(a.$$.fragment,o),t=!1},d(o){Je(a,o)}}}function zt(l){let a,t,o,c;return document.title="Edit page of the post",o=new Vt({props:{$$slots:{default:[Ct]},$$scope:{ctx:l}}}),{c(){a=n("meta"),t=v(),He(o.$$.fragment),this.h()},l(e){const d=yt("svelte-ql95em",document.head);a=i(d,"META",{name:!0,content:!0}),d.forEach(u),t=_(e),Qe(o.$$.fragment,e),this.h()},h(){r(a,"name","edit of a single blog page"),r(a,"content","Edit form for the blog post")},m(e,d){s(document.head,a),Le(e,t,d),Xe(o,e,d),c=!0},p(e,[d]){const g={};d&35&&(g.$$scope={dirty:d,ctx:e}),o.$set(g)},i(e){c||(fe(o.$$.fragment,e),c=!0)},o(e){he(o.$$.fragment,e),c=!1},d(e){u(a),e&&u(t),Je(o,e)}}}function Ht(l,a,t){let o;ze(l,vt,g=>t(2,o=g));let c={},e=!0;return(async()=>{try{const g=o.params.id;console.log(g),g?(t(0,c=await wt(g)),t(1,e=!1),console.log("loading state:",e),console.log("this is fucking post prop",c)):console.log("id is not exists on page.params!")}catch(g){console.log("error while loadPost",g)}})(),[c,e]}class tr extends mt{constructor(a){super(),gt(this,a,Ht,zt,bt,{})}}export{tr as default};
