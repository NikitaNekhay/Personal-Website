import{S as We,i as Ye,s as Ze,k as u,q as U,a as y,l as c,m as h,r as N,h as p,c as w,n as l,b as ye,C as o,O as P,D as J,u as O,P as et,E as le,F as at,G as Ue,o as lt,y as Ne,M as ot,z as Ve,A as Be,g as oe,d as se,B as qe,e as Ke,v as st,f as nt}from"../chunks/index.b9428a69.js";import"../chunks/store.bac6cf28.js";import{a as it,b as ut,c as ct,u as pt,g as dt}from"../chunks/firebase.11792937.js";import{b as tt,u as Qe}from"../chunks/post.59092c10.js";import{p as rt}from"../chunks/stores.9f73e7b4.js";import{X as ft,m as mt,r as gt,x as ht}from"../chunks/ru.4cb9ce8e.js";import{R as bt,a as _t}from"../chunks/Route.5dfc5283.js";import"../chunks/history.686f2e10.js";import{b as vt}from"../chunks/paths.378627a4.js";function yt(s){let r,e,a,n,t,i=s[1]("Title")+"",d,f,g,A,V,k,L,C=s[1]("Description")+"",b,_,E,we,K,Y=s[1]("Make it as simple as informative")+"",ne,Ee,B,q,G,Z=s[1]("Author Name")+"",ie,ke,$,$e,F,z,ee=s[1]("Author Email")+"",ue,Ie,I,xe,M,R,X,te=s[1]("Price")+"",ce,De,x,Pe,S,j,re=s[1]("Files")+"",pe,Ae,Q,T,Le,H,ae=s[1]("Submit")+"",de,Te,Fe;return{c(){r=u("div"),e=u("form"),a=u("div"),n=u("div"),t=u("label"),d=U(i),f=y(),g=u("input"),A=y(),V=u("div"),k=u("div"),L=u("label"),b=U(C),_=y(),E=u("input"),we=y(),K=u("p"),ne=U(Y),Ee=y(),B=u("div"),q=u("div"),G=u("label"),ie=U(Z),ke=y(),$=u("input"),$e=y(),F=u("div"),z=u("label"),ue=U(ee),Ie=y(),I=u("input"),xe=y(),M=u("div"),R=u("div"),X=u("label"),ce=U(te),De=y(),x=u("input"),Pe=y(),S=u("div"),j=u("label"),pe=U(re),Ae=y(),Q=u("div"),T=u("input"),Le=y(),H=u("button"),de=U(ae),this.h()},l(m){r=c(m,"DIV",{class:!0});var v=h(r);e=c(v,"FORM",{class:!0});var D=h(e);a=c(D,"DIV",{class:!0});var Me=h(a);n=c(Me,"DIV",{class:!0});var fe=h(n);t=c(fe,"LABEL",{class:!0,for:!0});var Re=h(t);d=N(Re,i),Re.forEach(p),f=w(fe),g=c(fe,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),fe.forEach(p),Me.forEach(p),A=w(D),V=c(D,"DIV",{class:!0});var Se=h(V);k=c(Se,"DIV",{class:!0});var W=h(k);L=c(W,"LABEL",{class:!0,for:!0});var Oe=h(L);b=N(Oe,C),Oe.forEach(p),_=w(W),E=c(W,"INPUT",{class:!0,id:!0,placeholder:!0}),we=w(W),K=c(W,"P",{class:!0});var Ce=h(K);ne=N(Ce,Y),Ce.forEach(p),W.forEach(p),Se.forEach(p),Ee=w(D),B=c(D,"DIV",{class:!0});var me=h(B);q=c(me,"DIV",{class:!0});var ge=h(q);G=c(ge,"LABEL",{class:!0,for:!0});var Ge=h(G);ie=N(Ge,Z),Ge.forEach(p),ke=w(ge),$=c(ge,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),ge.forEach(p),$e=w(me),F=c(me,"DIV",{class:!0});var he=h(F);z=c(he,"LABEL",{class:!0,for:!0});var ze=h(z);ue=N(ze,ee),ze.forEach(p),Ie=w(he),I=c(he,"INPUT",{class:!0,itype:!0,id:!0,placeholder:!0}),he.forEach(p),me.forEach(p),xe=w(D),M=c(D,"DIV",{class:!0});var be=h(M);R=c(be,"DIV",{class:!0});var _e=h(R);X=c(_e,"LABEL",{class:!0,for:!0});var Xe=h(X);ce=N(Xe,te),Xe.forEach(p),De=w(_e),x=c(_e,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),_e.forEach(p),Pe=w(be),S=c(be,"DIV",{class:!0});var ve=h(S);j=c(ve,"LABEL",{class:!0,for:!0});var je=h(j);pe=N(je,re),je.forEach(p),Ae=w(ve),Q=c(ve,"DIV",{class:!0});var He=h(Q);T=c(He,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),He.forEach(p),ve.forEach(p),be.forEach(p),Le=w(D),H=c(D,"BUTTON",{type:!0});var Je=h(H);de=N(Je,ae),Je.forEach(p),D.forEach(p),v.forEach(p),this.h()},h(){l(t,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),l(t,"for","title"),l(g,"class","appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"),l(g,"type","text"),l(g,"id","title"),g.required=!0,l(g,"placeholder","Title"),l(n,"class","w-full px-3"),l(a,"class","flex flex-wrap -mx-3 mb-6"),l(L,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),l(L,"for","description"),l(E,"class","appearance-none block w-full bg-gray-200 text-gray-700 place-items-start border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"),l(E,"id","description"),l(E,"placeholder","Description"),l(K,"class","text-gray-600 text-xs italic"),l(k,"class","w-full px-3 h-full"),l(V,"class","flex flex-wrap -mx-3 mb-6"),l(G,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),l(G,"for","author"),l($,"class","appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"),l($,"type","text"),l($,"id","author"),l($,"placeholder","Author"),$.required=!0,l(q,"class","w-full md:w-1/2 px-3 mb-6 md:mb-0"),l(z,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),l(z,"for","authorEmail"),l(I,"class","appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"),l(I,"itype","email"),l(I,"id","authorEmail"),l(I,"placeholder","email@web.net"),I.required=!0,l(F,"class","w-full md:w-1/2 px-3"),l(B,"class","flex flex-wrap -mx-3 mb-6"),l(X,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),l(X,"for","price"),l(x,"class","appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-2.5 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"),l(x,"type","number"),l(x,"id","price"),x.required=!0,l(x,"placeholder","400$"),l(R,"class","md:w-2/4 h-1/2 py-0 mb-6 md:mb-0"),l(j,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),l(j,"for","files"),l(T,"class","appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-2 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"),l(T,"type","file"),l(T,"id","images"),T.multiple=!0,l(T,"placeholder","Files"),l(Q,"class","relative"),l(S,"class","md:w-2/4 h-1/2 px-3 mb-6 md:mb-0"),l(M,"class","flex flex-wrap -mx-3 mb-2 ms-0"),l(H,"type","submit"),l(e,"class","w-full max-w-lg "),l(r,"class","flex pt-60 place-content-center place")},m(m,v){ye(m,r,v),o(r,e),o(e,a),o(a,n),o(n,t),o(t,d),o(n,f),o(n,g),P(g,s[0].title),o(e,A),o(e,V),o(V,k),o(k,L),o(L,b),o(k,_),o(k,E),P(E,s[0].description),o(k,we),o(k,K),o(K,ne),o(e,Ee),o(e,B),o(B,q),o(q,G),o(G,ie),o(q,ke),o(q,$),P($,s[0].author),o(B,$e),o(B,F),o(F,z),o(z,ue),o(F,Ie),o(F,I),P(I,s[0].authorEmail),o(e,xe),o(e,M),o(M,R),o(R,X),o(X,ce),o(R,De),o(R,x),P(x,s[0].price),o(M,Pe),o(M,S),o(S,j),o(j,pe),o(S,Ae),o(S,Q),o(Q,T),o(e,Le),o(e,H),o(H,de),Te||(Fe=[J(g,"input",s[4]),J(E,"input",s[5]),J($,"input",s[6]),J(I,"input",s[7]),J(x,"input",s[8]),J(T,"change",s[3]),J(H,"click",s[2])],Te=!0)},p(m,[v]){v&2&&i!==(i=m[1]("Title")+"")&&O(d,i),v&1&&g.value!==m[0].title&&P(g,m[0].title),v&2&&C!==(C=m[1]("Description")+"")&&O(b,C),v&1&&E.value!==m[0].description&&P(E,m[0].description),v&2&&Y!==(Y=m[1]("Make it as simple as informative")+"")&&O(ne,Y),v&2&&Z!==(Z=m[1]("Author Name")+"")&&O(ie,Z),v&1&&$.value!==m[0].author&&P($,m[0].author),v&2&&ee!==(ee=m[1]("Author Email")+"")&&O(ue,ee),v&1&&I.value!==m[0].authorEmail&&P(I,m[0].authorEmail),v&2&&te!==(te=m[1]("Price")+"")&&O(ce,te),v&1&&et(x.value)!==m[0].price&&P(x,m[0].price),v&2&&re!==(re=m[1]("Files")+"")&&O(pe,re),v&2&&ae!==(ae=m[1]("Submit")+"")&&O(de,ae)},i:le,o:le,d(m){m&&p(r),Te=!1,at(Fe)}}}function wt(s,r,e){let a,n;Ue(s,rt,b=>e(10,a=b)),Ue(s,ft,b=>e(1,n=b)),mt("ru",gt),ht.set("ru");let t={},i=!1;try{const{id:b}=a.params;console.log(b),lt(async()=>{e(0,t=await tt(b)),console.log(t)})}catch(b){console.log("error while getting id of a post",b)}async function d(b){b.preventDefault(),it.currentUser;try{if(i){const _=await Promise.all(t.images.map(f));console.log("These are imageUrls",_),e(0,t.images=_,t),Qe(t.id,t.title,t.images,t.author,t.authorEmail,t.description,t.price,t.date)}else console.log("don't touch images"),Qe(t.id,t.title,t.images,t.author,t.authorEmail,t.description,t.price,t.date);console.log("Form submitted")}catch(_){console.log("auth error",_)}}async function f(b){try{const _=ut(ct,`images/${b.name}`);await pt(_,b);const E=await dt(_);return console.log("Image uploaded:",E),E}catch(_){console.log("uploadImage error",_)}}function g(b){try{i=!0;const _=b.target.files;console.log(_),e(0,t.images=Array.from(_),t)}catch(_){console.log("handleImageUpload error",_)}}function A(){t.title=this.value,e(0,t)}function V(){t.description=this.value,e(0,t)}function k(){t.author=this.value,e(0,t)}function L(){t.authorEmail=this.value,e(0,t)}function C(){t.price=et(this.value),e(0,t)}return[t,n,d,g,A,V,k,L,C]}class Et extends We{constructor(r){super(),Ye(this,r,wt,yt,Ze,{})}}function kt(s){let r,e;return r=new Et({props:{post:s[0]}}),{c(){Ne(r.$$.fragment)},l(a){Ve(r.$$.fragment,a)},m(a,n){Be(r,a,n),e=!0},p(a,n){const t={};n&1&&(t.post=a[0]),r.$set(t)},i(a){e||(oe(r.$$.fragment,a),e=!0)},o(a){se(r.$$.fragment,a),e=!1},d(a){qe(r,a)}}}function $t(s){let r;return{c(){r=U("LOADING")},l(e){r=N(e,"LOADING")},m(e,a){ye(e,r,a)},p:le,i:le,o:le,d(e){e&&p(r)}}}function It(s){let r,e,a,n;const t=[$t,kt],i=[];function d(f,g){return f[1]?0:1}return r=d(s),e=i[r]=t[r](s),{c(){e.c(),a=Ke()},l(f){e.l(f),a=Ke()},m(f,g){i[r].m(f,g),ye(f,a,g),n=!0},p(f,g){let A=r;r=d(f),r===A?i[r].p(f,g):(st(),se(i[A],1,1,()=>{i[A]=null}),nt(),e=i[r],e?e.p(f,g):(e=i[r]=t[r](f),e.c()),oe(e,1),e.m(a.parentNode,a))},i(f){n||(oe(e),n=!0)},o(f){se(e),n=!1},d(f){i[r].d(f),f&&p(a)}}}function xt(s){let r,e;return r=new _t({props:{path:`${vt}/posts/:id/edit`,$$slots:{default:[It,({params:a})=>({4:a}),({params:a})=>a?16:0]},$$scope:{ctx:s}}}),{c(){Ne(r.$$.fragment)},l(a){Ve(r.$$.fragment,a)},m(a,n){Be(r,a,n),e=!0},p(a,n){const t={};n&35&&(t.$$scope={dirty:n,ctx:a}),r.$set(t)},i(a){e||(oe(r.$$.fragment,a),e=!0)},o(a){se(r.$$.fragment,a),e=!1},d(a){qe(r,a)}}}function Dt(s){let r,e,a,n,t;return document.title="Edit page of the post",n=new bt({props:{$$slots:{default:[xt]},$$scope:{ctx:s}}}),{c(){r=u("meta"),e=u("meta"),a=y(),Ne(n.$$.fragment),this.h()},l(i){const d=ot("svelte-1hsctau",document.head);r=c(d,"META",{name:!0,content:!0}),e=c(d,"META",{"http-equiv":!0,content:!0}),d.forEach(p),a=w(i),Ve(n.$$.fragment,i),this.h()},h(){l(r,"name","edit of a single blog page"),l(r,"content","Edit form for the blog post"),l(e,"http-equiv","Content-Security-Policy"),l(e,"content","default-src 'self'; font-src 'self' data:;")},m(i,d){o(document.head,r),o(document.head,e),ye(i,a,d),Be(n,i,d),t=!0},p(i,[d]){const f={};d&35&&(f.$$scope={dirty:d,ctx:i}),n.$set(f)},i(i){t||(oe(n.$$.fragment,i),t=!0)},o(i){se(n.$$.fragment,i),t=!1},d(i){p(r),p(e),i&&p(a),qe(n,i)}}}function Pt(s,r,e){let a;Ue(s,rt,d=>e(2,a=d));let n={},t=!0;return(async()=>{try{const d=a.params.id;console.log(d),d?(e(0,n=await tt(d)),console.log(t),e(1,t=!1),console.log(t)):console.log("id is not exists on page.params!")}catch(d){console.log("error while loadPost",d)}})(),[n,t]}class Mt extends We{constructor(r){super(),Ye(this,r,Pt,Dt,Ze,{})}}export{Mt as default};
