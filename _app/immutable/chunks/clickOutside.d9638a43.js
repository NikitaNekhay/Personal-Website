import{r as i,e as u,d as n,h as p,J as y}from"./firebase.86d06953.js";import{b as f}from"./en.4acc708b.js";async function U(e,r,s,t,o,h,g){try{const c=i(u(n,"user"),e.uid);await p(n,async l=>{const d=await l.get(c);if(!d.exists())if(e){E(e);return}else throw new Error("User does not exist");const a=d.data();console.log("WHAT WE HAVE FROM DOCUMENTS userData: ",a);const m={name:r??a.name,email:s??a.email,phone:t??a.phone,country:o??a.country,description:h??a.description,messages:g??a.messages};console.log("WHAT WE GOT FROM SUBMIT updatedUserData: ",m),l.update(c,m)})}catch(c){console.error("Error updating user:",c)}}async function E(e){try{console.log("refreshing");const r=i(u(n,"user"),e.uid);await p(n,async s=>{let t;e.email===null?t="null":t=e.email;const o={name:"",email:t,phone:"",country:"",description:"",messages:[""]};f.set({user:e,loading:!0,data:{name:o.name,email:t,phone:o.phone,country:o.country,description:o.description}})})}catch(r){console.error("Error updating user:",r)}}async function k(e){var r;try{console.log(e.uid);const s=i(u(n,"user"),e.uid),t=await y(s),o=t.data();return(r=f)==null||r.set(o),t.exists()?t.data():null}catch(s){console.error("Error fetching user:",s)}}function v(e){const r=t=>{e&&!e.contains(t.target)&&!t.defaultPrevented&&e.dispatchEvent(new CustomEvent("click_outside"))},s=window.document;return s.addEventListener("click",r,!0),{destroy(){s.removeEventListener("click",r,!0)}}}export{v as c,k as g,U as u};
