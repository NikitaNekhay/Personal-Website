import{e as i,d as e,r as d,J as b,t as w,f as m,h as y,o as D}from"./firebase.7a7c2902.js";import{c as E}from"./store.729a47b7.js";const B=i(e,"blogs");async function R(o){try{console.log("Temp post:",o);const t=await m(B,o);console.log("New blog added with ID: ",t.id),P(t.id,o.title,o.images,o.author,o.authorEmail,o.description,o.price,o.date)}catch(t){console.log("error while adding blog post",t)}}async function P(o,t,r,s,l,h,u,f){try{const c=d(i(e,"blogs"),o);await y(e,async g=>{const n=await g.get(c);if(!n.exists())throw new Error("Post does not exist");const a=n.data();console.log("this is postData var:",a);const p={id:o??a.id,title:t??a.title,images:r??a.images,author:s??a.author,authorEmail:l??a.authorEmail,description:h??a.description,price:u??a.price,date:f??a.date};g.update(c,p),console.log("this is updatedPostData var:",p),console.log("this is what happens with post data after transaction: ",n.data())})}catch(c){console.error("Error updating post:",c)}}async function S(o){try{console.log("this is id for db call: ",o);const t=d(i(e,"blogs"),o),r=await b(t);if(r.exists()){const s=r.data(),l={id:s.id??0,title:s.title??"",images:s.images??[],author:s.author??"John Berkley",authorEmail:s.authorEmail??"john.example@gmail.com",description:s.description??"Lorem ipsum",price:s.price??1,date:s.date??new Date};return E.set(l),r.data()}else return null}catch(t){console.error("Error fetching post:",t)}}async function v(){try{const o=i(e,"blogs");return(await w(o)).docs.map(s=>({id:s.id,...s.data()}))}catch(o){return console.error("Error fetching blog posts:",o),[]}}async function C(o){try{const t=d(i(e,"blogs"),o);await D(t),console.log("Blog post deleted:",o)}catch(t){console.error("Error deleting blog post:",t)}}export{R as a,S as b,C as d,v as g};
