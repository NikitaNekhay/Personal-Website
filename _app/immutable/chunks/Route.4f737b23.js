import{S as tt,i as et,s as ot,L as nt,M as st,N as at,O as ct,g as R,d as N,Y as E,Z as U,G as I,o as ft,e as C,b as M,v as z,f as D,h as w,_ as _t,$ as Y,a0 as G,a1 as H,a2 as mt,E as h,x as q,y as W,z as pt,A as Z,a3 as ht,a4 as F,B as J}from"./index.dda795d4.js";import{w as A,d as dt}from"./index.21cd2ebb.js";import{g as bt}from"./history.686f2e10.js";const K={},j={},gt={},lt=/^:(.+)/,Q=4,kt=3,Rt=2,St=1,Nt=1,B=n=>n.replace(/(^\/+|\/+$)/g,"").split("/"),L=n=>n.replace(/(^\/+|\/+$)/g,""),Tt=(n,t)=>{const s=n.default?0:B(n.path).reduce((e,o)=>(e+=Q,o===""?e+=Nt:lt.test(o)?e+=Rt:o[0]==="*"?e-=Q+St:e+=kt,e),0);return{route:n,score:s,index:t}},Ct=n=>n.map(Tt).sort((t,s)=>t.score<s.score?1:t.score>s.score?-1:t.index-s.index),V=(n,t)=>{let s,e;const[o]=t.split("?"),a=B(o),r=a[0]==="",_=Ct(n);for(let c=0,i=_.length;c<i;c++){const f=_[c].route;let m=!1;if(f.default){e={route:f,params:{},uri:t};continue}const d=B(f.path),b={},u=Math.max(a.length,d.length);let p=0;for(;p<u;p++){const g=d[p],T=a[p];if(g&&g[0]==="*"){const y=g==="*"?"*":g.slice(1);b[y]=a.slice(p).map(decodeURIComponent).join("/");break}if(typeof T>"u"){m=!0;break}const O=lt.exec(g);if(O&&!r){const y=decodeURIComponent(T);b[O[1]]=y}else if(g!==T){m=!0;break}}if(!m){s={route:f,params:b,uri:"/"+a.slice(0,p).join("/")};break}}return s||e||null},X=(n,t)=>`${L(t==="/"?n:`${L(n)}/${L(t)}`)}/`,Ot=n=>({route:n&2,location:n&1}),v=n=>({route:n[1]&&n[1].uri,location:n[0]});function Pt(n){let t;const s=n[12].default,e=nt(s,n,n[11],v);return{c(){e&&e.c()},l(o){e&&e.l(o)},m(o,a){e&&e.m(o,a),t=!0},p(o,[a]){e&&e.p&&(!t||a&2051)&&st(e,s,o,o[11],t?ct(s,o[11],a,Ot):at(o[11]),v)},i(o){t||(R(e,o),t=!0)},o(o){N(e,o),t=!1},d(o){e&&e.d(o)}}}function yt(n,t,s){let e,o,a,r,{$$slots:_={},$$scope:c}=t,{basepath:i="/"}=t,{url:f=null}=t,{history:m=bt}=t;E(gt,m);const d=U(K),b=U(j),u=A([]);I(n,u,l=>s(9,o=l));const p=A(null);I(n,p,l=>s(1,r=l));let g=!1;const T=d||A(f?{pathname:f}:m.location);I(n,T,l=>s(0,e=l));const O=b?b.routerBase:A({path:i,uri:i});I(n,O,l=>s(10,a=l));const y=dt([O,p],([l,k])=>{if(!k)return l;const{path:S}=l,{route:P,uri:ut}=k;return{path:P.default?S:P.path.replace(/\*.*$/,""),uri:ut}}),rt=l=>{const{path:k}=a;let{path:S}=l;if(l._path=S,l.path=X(k,S),typeof window>"u"){if(g)return;const P=V([l],e.pathname);P&&(p.set(P),g=!0)}else u.update(P=>[...P,l])},it=l=>{u.update(k=>k.filter(S=>S!==l))};return d||(ft(()=>m.listen(k=>{T.set(k.location)})),E(K,T)),E(j,{activeRoute:p,base:O,routerBase:y,registerRoute:rt,unregisterRoute:it}),n.$$set=l=>{"basepath"in l&&s(6,i=l.basepath),"url"in l&&s(7,f=l.url),"history"in l&&s(8,m=l.history),"$$scope"in l&&s(11,c=l.$$scope)},n.$$.update=()=>{if(n.$$.dirty&1024){const{path:l}=a;u.update(k=>k.map(S=>({...S,path:X(l,S._path)})))}if(n.$$.dirty&513){const l=V(o,e.pathname);p.set(l)}},[e,r,u,p,T,O,i,f,m,o,a,c,_]}class Gt extends tt{constructor(t){super(),et(this,t,yt,Pt,ot,{basepath:6,url:7,history:8})}}const It=n=>({params:n&4}),x=n=>({params:n[2]});function $(n){let t,s,e,o;const a=[Mt,At],r=[];function _(c,i){return c[0]?0:1}return t=_(n),s=r[t]=a[t](n),{c(){s.c(),e=C()},l(c){s.l(c),e=C()},m(c,i){r[t].m(c,i),M(c,e,i),o=!0},p(c,i){let f=t;t=_(c),t===f?r[t].p(c,i):(z(),N(r[f],1,1,()=>{r[f]=null}),D(),s=r[t],s?s.p(c,i):(s=r[t]=a[t](c),s.c()),R(s,1),s.m(e.parentNode,e))},i(c){o||(R(s),o=!0)},o(c){N(s),o=!1},d(c){r[t].d(c),c&&w(e)}}}function At(n){let t;const s=n[8].default,e=nt(s,n,n[7],x);return{c(){e&&e.c()},l(o){e&&e.l(o)},m(o,a){e&&e.m(o,a),t=!0},p(o,a){e&&e.p&&(!t||a&132)&&st(e,s,o,o[7],t?ct(s,o[7],a,It):at(o[7]),x)},i(o){t||(R(e,o),t=!0)},o(o){N(e,o),t=!1},d(o){e&&e.d(o)}}}function Mt(n){let t,s,e,o={ctx:n,current:null,token:null,hasCatch:!1,pending:Lt,then:Et,catch:wt,value:12,blocks:[,,,]};return H(s=n[0],o),{c(){t=C(),o.block.c()},l(a){t=C(),o.block.l(a)},m(a,r){M(a,t,r),o.block.m(a,o.anchor=r),o.mount=()=>t.parentNode,o.anchor=t,e=!0},p(a,r){n=a,o.ctx=n,r&1&&s!==(s=n[0])&&H(s,o)||mt(o,n,r)},i(a){e||(R(o.block),e=!0)},o(a){for(let r=0;r<3;r+=1){const _=o.blocks[r];N(_)}e=!1},d(a){a&&w(t),o.block.d(a),o.token=null,o=null}}}function wt(n){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Et(n){var _;let t,s,e;const o=[n[2],n[3]];var a=((_=n[12])==null?void 0:_.default)||n[12];function r(c){let i={};for(let f=0;f<o.length;f+=1)i=Y(i,o[f]);return{props:i}}return a&&(t=q(a,r())),{c(){t&&W(t.$$.fragment),s=C()},l(c){t&&pt(t.$$.fragment,c),s=C()},m(c,i){t&&Z(t,c,i),M(c,s,i),e=!0},p(c,i){var m;const f=i&12?ht(o,[i&4&&F(c[2]),i&8&&F(c[3])]):{};if(i&1&&a!==(a=((m=c[12])==null?void 0:m.default)||c[12])){if(t){z();const d=t;N(d.$$.fragment,1,0,()=>{J(d,1)}),D()}a?(t=q(a,r()),W(t.$$.fragment),R(t.$$.fragment,1),Z(t,s.parentNode,s)):t=null}else a&&t.$set(f)},i(c){e||(t&&R(t.$$.fragment,c),e=!0)},o(c){t&&N(t.$$.fragment,c),e=!1},d(c){c&&w(s),t&&J(t,c)}}}function Lt(n){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Ut(n){let t,s,e=n[1]&&n[1].route===n[5]&&$(n);return{c(){e&&e.c(),t=C()},l(o){e&&e.l(o),t=C()},m(o,a){e&&e.m(o,a),M(o,t,a),s=!0},p(o,[a]){o[1]&&o[1].route===o[5]?e?(e.p(o,a),a&2&&R(e,1)):(e=$(o),e.c(),R(e,1),e.m(t.parentNode,t)):e&&(z(),N(e,1,1,()=>{e=null}),D())},i(o){s||(R(e),s=!0)},o(o){N(e),s=!1},d(o){e&&e.d(o),o&&w(t)}}}function Yt(n,t,s){let e,{$$slots:o={},$$scope:a}=t,{path:r=""}=t,{component:_=null}=t,c={},i={};const{registerRoute:f,unregisterRoute:m,activeRoute:d}=U(j);I(n,d,u=>s(1,e=u));const b={path:r,default:r===""};return f(b),_t(()=>{m(b)}),n.$$set=u=>{s(11,t=Y(Y({},t),G(u))),"path"in u&&s(6,r=u.path),"component"in u&&s(0,_=u.component),"$$scope"in u&&s(7,a=u.$$scope)},n.$$.update=()=>{{e&&e.route===b&&s(2,c=e.params);const{component:u,path:p,...g}=t;s(3,i=g),u&&(u.toString().startsWith("class ")?s(0,_=u):s(0,_=u()))}},t=G(t),[_,e,c,i,d,b,r,a,o]}class Ht extends tt{constructor(t){super(),et(this,t,Yt,Ut,ot,{path:6,component:0})}}export{Gt as R,Ht as a};
