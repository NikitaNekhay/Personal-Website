import{s as i,d as e,r as d,J as f,u as w,b as m,t as y,o as D}from"./firebase.d761e8f2.js";import{b as E}from"./store.28b87948.js";const B=i(e,"blogs");async function R(o){try{console.log("Temp post:",o);const t=await w(B,o);console.log("New blog added with ID: ",t.id),x(t.id,o.title,o.images,o.author,o.authorEmail,o.description,o.price,o.date)}catch(t){console.log("error while adding blog post",t)}}async function x(o,t,r,s,n,h,u,b){try{const l=d(i(e,"blogs"),o);await m(e,async g=>{const c=await g.get(l);if(!c.exists())throw new Error("Post does not exist");const a=c.data();console.log("this is postData var:",a);const p={id:o??a.id,title:t??a.title,images:r??a.images,author:s??a.author,authorEmail:n??a.authorEmail,description:h??a.description,price:u??a.price,date:b??a.date};g.update(l,p),console.log("this is updatedPostData var:",p),console.log("this is what happens with post data after transaction: ",c.data())})}catch(l){console.error("Error updating post:",l)}}async function S(o){try{console.log("this is id for db call: ",o);const t=d(i(e,"blogs"),o),r=await f(t);if(r.exists()){const s=r.data(),n={id:s.id??0,title:s.title??"",images:s.images??[],author:s.author??"John Berkley",authorEmail:s.authorEmail??"john.example@gmail.com",description:s.description??"Lorem ipsum",price:s.price??1,date:s.date??new Date};return E.set(n),r.exists()?r.data():null}else return null}catch(t){console.error("Error fetching post:",t)}}async function v(){try{const o=i(e,"blogs");return(await y(o)).docs.map(s=>({id:s.id,...s.data()}))}catch(o){return console.error("Error fetching blog posts:",o),[]}}async function C(o){try{const t=d(i(e,"blogs"),o);await D(t),console.log("Blog post deleted:",o)}catch(t){console.error("Error deleting blog post:",t)}}export{R as a,v as b,C as d,S as g,x as u};
