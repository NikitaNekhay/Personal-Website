const l=t=>({...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}),p=t=>{const n=[];let s=l(t);return{get location(){return s},listen(a){n.push(a);const e=()=>{s=l(t),a({location:s,action:"POP"})};return t.addEventListener("popstate",e),()=>{t.removeEventListener("popstate",e);const i=n.indexOf(a);n.splice(i,1)}},navigate(a,{state:e,replace:i=!1}={}){e={...e,key:Date.now()+""};try{i?t.history.replaceState(e,null,a):t.history.pushState(e,null,a)}catch{t.location[i?"replace":"assign"](a)}s=l(t),n.forEach(o=>o({location:s,action:"PUSH"})),document.activeElement.blur()}}},h=(t="/")=>{let n=0;const s=[{pathname:t,search:""}],a=[];return{get location(){return s[n]},addEventListener(e,i){},removeEventListener(e,i){},history:{get entries(){return s},get index(){return n},get state(){return a[n]},pushState(e,i,o){const[r,c=""]=o.split("?");n++,s.push({pathname:r,search:c}),a.push(e)},replaceState(e,i,o){const[r,c=""]=o.split("?");s[n]={pathname:r,search:c},a[n]=e}}}},d=typeof window<"u"&&"document"in window,y=p(d?window:h());export{y as g};
