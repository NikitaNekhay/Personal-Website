import{e as i,d as e,r as l,J as f,u as m,f as y,t as w,o as E}from"./firebase.80d7db40.js";import{b as D}from"./store.a25cdfb8.js";const x=i(e,"blogs");async function R(o){try{const t=await m(x,o);B(t.id,o.title,o.images,o.author,o.authorEmail,o.description,o.price,o.date)}catch(t){console.error("error while adding blog post",t)}}async function B(o,t,r,s,n,u,p,h){try{const c=l(i(e,"blogs"),o);await y(e,async d=>{const g=await d.get(c);if(!g.exists())throw new Error("Post does not exist");const a=g.data(),b={id:o??a.id,title:t??a.title,images:r??a.images,author:s??a.author,authorEmail:n??a.authorEmail,description:u??a.description,price:p??a.price,date:h??a.date};d.update(c,b)})}catch(c){console.error("Error updating post:",c)}}async function S(o){try{const t=l(i(e,"blogs"),o),r=await f(t);if(r.exists()){const s=r.data(),n={id:s.id??0,title:s.title??"",images:s.images??[],author:s.author??"John Berkley",authorEmail:s.authorEmail??"john.example@gmail.com",description:s.description??"Lorem ipsum",price:s.price??1,date:s.date??new Date};return D.set(n),r.exists()?r.data():null}else return null}catch(t){console.error("Error fetching post:",t)}}async function C(){try{const o=i(e,"blogs");return(await w(o)).docs.map(s=>({id:s.id,...s.data()}))}catch(o){return console.error("Error fetching blog posts:",o),[]}}async function j(o){try{const t=l(i(e,"blogs"),o);await E(t)}catch(t){console.error("Error deleting blog post:",t)}}export{R as a,C as b,j as d,S as g,B as u};
